<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday My Love</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            animation: pageEnter 0.8s ease;
        }

        @keyframes pageEnter {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .greeting {
            animation: fadeInUp 1s ease forwards;
        }

        .music-indicator {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }
        
        .music-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #ff69b4, #da70d6);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .music-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
        }
        
        .music-btn:active {
            transform: scale(0.95);
        }
        
        .music-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: #ff69b4;
            white-space: nowrap;
            font-weight: 500;
            animation: fadeInOut 2s ease-in-out infinite;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <audio id="bgMusic" loop>
        <source src="./song.mp3" type="audio/mpeg">
    </audio>
    
    <div class="music-indicator" id="musicIndicator">
        <button class="music-btn" id="musicBtn">‚ñ∂</button>
        <span class="music-text">play me</span>
    </div>
    
    <div class="cursor"></div>
    <div class="container">
        <h1>Happy Birthday Babyüíó</h1>
        <div class="greeting"></div>
        <button class="cta-button">Click to Enter Our World üíï</button>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const bgMusic = document.getElementById('bgMusic');
            const musicBtn = document.getElementById('musicBtn');
            
            bgMusic.volume = 0.3;
            
            // Restore playback time from localStorage
            const savedTime = localStorage.getItem('musicTime');
            const wasPlaying = localStorage.getItem('musicPlaying') === 'true';
            
            if (savedTime) {
                bgMusic.currentTime = parseFloat(savedTime);
            }
            
            // Try to play on first interaction
            const playAudio = () => {
                bgMusic.play().then(() => {
                    musicBtn.textContent = '‚è∏';
                }).catch(() => {
                    console.log('Audio autoplay blocked');
                });
                document.removeEventListener('click', playAudio);
                document.removeEventListener('scroll', playAudio);
            };
            
            // Try to play immediately or resume
            if (wasPlaying) {
                bgMusic.play().catch(() => {
                    document.addEventListener('click', playAudio);
                    document.addEventListener('scroll', playAudio);
                });
            } else {
                bgMusic.play().catch(() => {
                    document.addEventListener('click', playAudio);
                    document.addEventListener('scroll', playAudio);
                });
            }
            
            // Update button icon based on play/pause state
            bgMusic.addEventListener('play', () => {
                musicBtn.textContent = '‚è∏';
                localStorage.setItem('musicPlaying', 'true');
            });
            
            bgMusic.addEventListener('pause', () => {
                musicBtn.textContent = '‚ñ∂';
                localStorage.setItem('musicPlaying', 'false');
            });
            
            // Save playback time when leaving page
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('musicTime', bgMusic.currentTime);
                localStorage.setItem('musicPlaying', !bgMusic.paused);
            });
            
            musicBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                if (bgMusic.paused) {
                    bgMusic.play();
                    musicBtn.textContent = '‚è∏';
                } else {
                    bgMusic.pause();
                    musicBtn.textContent = '‚ñ∂';
                }
            });
        });
    </script>
</body>
</html>